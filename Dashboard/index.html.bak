<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Dashboard</title>
  </head>
  <body>
    <div class="admin-dashboard-container">
      <div class="admin-dashboard">
        <div class="admin-dash-side-menu">
          <div class="logo-div">
            <img class="logo-img" src="logo.png" alt="" />
            <h2 class="logo-heading">Emocare</h2>
          </div>
          <div class="dashboard-links">
            <div class="link">
              <div class="link-flex" onclick="homeButton()">
                <div class="link-logo">
                  <i class="fa-solid fa-house-chimney"></i>
                </div>
                <div class="link-text">
                  <p>Home</p>
                </div>
              </div>
              <div class="link-flex">
                <div class="link-logo">
                  <i class="fa-solid fa-circle-exclamation"></i>
                </div>
                <div class="link-text">
                  <p>Guidelines</p>
                </div>
              </div>
              <div class="link-flex" onclick="communityButton()">
                <div class="link-logo">
                  <i class="fa-brands fa-elementor"></i>
                </div>
                <div class="link-text">
                  <p>Community </p>
                </div>
              </div>
              <div class="link-flex">
                <div class="link-logo">
                  <i class="fa-solid fa-comment-medical"></i>
                </div>
                <div class="link-text">
                  <p>Chatbot</p>
                </div>
              </div>
              <div class="link-flex" onclick="editButton()" style="cursor:pointer;">
                <div class="link-logo">
                  <i class="fa-sharp fa-solid fa-newspaper"></i>
                </div>
                <div class="link-text">
                  <p>Edit Profile</p>
                </div>
              </div>
              <div class="link-flex">
                <div class="link-logo">
                  <i class="fa-solid fa-chart-simple"></i>
                </div>
                <div class="link-text">
                  <p>Trends</p>
                </div>
              </div>
              <div class="link-flex">
                <div class="link-logo">
                  <i class="fa-sharp fa-solid fa-bell"></i>
                </div>
                <div class="link-text">
                  <p>Notifications</p>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="admin-dash-render-data">

          <nav class="navbar">
            <div class="nav-maindiv">
                <div class="left-div">
                    <i class="fa-sharp fa-solid fa-bars"></i>
                 </div>
                 <div class="right-div">
               <!--     <i class="fa-sharp fa-solid fa-bell" style="color: #acaeae;"></i>
                    <sup class="notify-sup">3</sup>
                    <i class="fa-solid fa-envelope" style="color: #acaeae;"></i> 
                    <sup class="email-sup">2</sup> 
                    <i class="fa-sharp fa-solid fa-gear" style="color: #acaeae;"></i> 
					  <i class="fa-solid fa-user user" style="color: black; margin-left: .8rem;"></i> -->
					 <div style="display:flex; gap:15px;"> <div class="imgwrap"><img  id="userimg"></div>
					  <span id="username" style="margin-top:5px;"></span></div>
                  
                 </div>
            </div>
       
          </nav>

<style>
	.imgwrap{
		width:35px;
		height:35px;
		border-radius:50%;
	}
	.imgwrap img{
		width:100%;
		object-fit:cover;
		border-radius:50%;
	}
</style>

<script>
</script>
<style>
	.forum{
		width:100%;
		display:flex;
		justify-content:center;
		align-items:center;
		flex-direction:column;
		
	}
	.forum h1{
		margin:30px 0;
		font-size:27px;
	}
	.forumInput input[type="text"]{
		width:300px;
		padding:10px;
		border:2px solid crimson;
	}
	.forumInput input[type="submit"]{
		padding:10px 30px;
		background:crimson;
		color:#fff;
		border:none;
		outline:none;
	}
	.forumDispay{
		margin-top:40px;
		display:flex;
		justify-content:center;
		align-items:center;
		flex-direction:column;
		width:50%;
	}
	.forumDispay .forumBox{
		margin-top:50px;
		display:flex;
		justify-content:center;
		align-items:center;
		
		flex-direction:column;
		width:100%;
		padding-bottom:20px;
		border-bottom:1px solid crimson;
	}
	.forumDispay .forumBox .upper{
		display:flex;
		justify-content:space-between;
		align-items:center;
		width:100%;
	}
	.lower p{
		text-align:justify;
		margin-top:15px;
	}
</style>

	<style>
 .loading-div-forum {
            position: fixed;
            top: 5%;
            left: 56%;
            transform: translate(-50%, -50%);
            text-align: center;
          font-weight:600;
			color:#fff;
			z-index:9999;
			font-size:20px;
			background:crimson;
			padding:10px 20px;
			box-shadow:0 5px 10px rgba(0,0,0,0.2);
			display:none;
			
}
#divTwo{
	display:none;
}

</style>

<div class="loading-div-forum" id="loading-div-forum">
        Saving...
    </div>

<div class="forum" id="divTwo">

<h1>Welcome to the Emocare Blogs!</h1>
		<div class="forumInput">
		<form id="forumForm">		
		<input type="text" id="forumQuestion" placeholder="Write here..." required>
		<input type="submit" value="Submit">
		</form>
		</div>
		
		<div class="forumDispay" id="parentForm">
			
		</div>
		
	<script>
function getUserIdFromUrlThree() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        return urlSearchParams.get('objectId');
    }

	

async function fetchUserName() {
    const userId = getUserIdFromUrlThree();

    try {
      const response = await fetch(`https://brick-red-ostrich-gear.cyclic.app/apiold/usersold/${userId}`);

        if (response.ok) {
            console.log('response was ok');
        }

        const userData = await response.json();
		const nameOfUser = document.getElementById('username'); 
        const imageOfUser = document.getElementById('userimg'); 
         
		
            nameOfUser.innerText = `${userData.name}`; 
			imageOfUser.src = userData.url;
		return userData.name;
    } catch (error) {
        console.error('Error fetching user data:', error);
    }
}

fetchUserName();	
const loadingDivForum = document.getElementById('loading-div-forum');

	document.getElementById('forumForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const name = await fetchUserName();
    const text = document.getElementById('forumQuestion').value; // Assuming 'text' is the ID of the input field for the forum text
    const forumDate = new Date().toISOString(); // Get the current date and time in ISO format

 loadingDivForum.style.display = "block";
    // Send the form data to the backend
    const response = await fetch('https://brick-red-ostrich-gear.cyclic.app/uploadforum', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            name: name,
            text: text,
            forumDate: forumDate
        })
    });

    if (response.ok) {
        alert('Forum submitted successfully!');
		
 loadingDivForum.style.display = "none";
       location.reload();
    } else {
        alert('Error submitting forum!');
		
 loadingDivForum.style.display = "none";
    }
});

// Function to fetch forum posts from the backend and render them dynamically
async function fetchAndRenderForums() {
    try {
        const response = await fetch('https://brick-red-ostrich-gear.cyclic.app/myForums'); // Fetch forum posts from the backend
        const forums = await response.json(); // Extract forum posts from the response

        const parentDiv = document.getElementById('parentForm'); // Get the parent div where forum posts will be rendered

        // Loop through each forum post and create HTML elements to display them
        forums.forEach(forum => {
            // Create forum box container
            const forumBox = document.createElement('div');
            forumBox.classList.add('forumBox');

            // Create upper div for name and forum date
            const upperDiv = document.createElement('div');
            upperDiv.classList.add('upper');

            // Create h2 element for name
            const nameHeader = document.createElement('h2');
            nameHeader.textContent = forum.name; // Set name text
            upperDiv.appendChild(nameHeader);

            // Create h3 element for forum date (format the date as needed)
            const forumDateHeader = document.createElement('h3');
            const formattedDate = new Date(forum.forumDate).toLocaleDateString('en-US'); // Format date as MM/DD/YYYY
            forumDateHeader.textContent = formattedDate; // Set formatted date text
            upperDiv.appendChild(forumDateHeader);

            // Append upper div to forum box
            forumBox.appendChild(upperDiv);

            // Create lower div for forum text
            const lowerDiv = document.createElement('div');
            lowerDiv.classList.add('lower');

            // Create p element for forum text
            const textParagraph = document.createElement('p');
            textParagraph.textContent = forum.text; // Set forum text
            lowerDiv.appendChild(textParagraph);

            // Append lower div to forum box
            forumBox.appendChild(lowerDiv);

            // Append forum box to parent div
            parentDiv.appendChild(forumBox);
        });
    } catch (error) {
        console.error('Error fetching and rendering forums:', error);
    }
}

// Call fetchAndRenderForums function to fetch and render forum posts when the page loads
fetchAndRenderForums();

</script>	

</div>

          <div class="render-ghraph-data-container" id="divThree">
            <div class="render-ghraph-data">
                <div class="firstBox-div">
                  <div class="flex-three-div">
                    <div class="first-header-div">
                      <p class="dash-h">Trend Analysis</p>
                      <p class="overview-latest">Latest Overview</p>
                    </div>
                    <div class="seond-header-div">
                      <a class="daily" href="">DAILY</a>
                      <a class="all-c" href="">WEEKLY</a>
                      <a class="all-c" href="">MONTHLY</a>
                      <a class="all-c" href="">YEARLY</a>
                    </div>
                    <div class="third-header-div">
                      <div class="first-online">
                        <div class="color-c-1"></div>
                        <p>Online</p>
                      </div>
                      <div class="first-store">
                        <div class="color-c-2"></div>
                        <p>Latest</p>
                      </div>
                    </div>
                  </div>

                 <div class="render-graphDIV">
                    <div class="firstGRAPH_div">
                    <div class="tt-earnings">
                      <h2>94.96</h2>
                      <p>Highest Depression Rate</p>
                    </div>
                    <div class="current-month-sales">
                      <h2>22</h2>
                      <p>Lowest Stress Rate</p>
                    </div>
                    <div class="btnDiv">
                      <button>Refresh Stats</button>
                    </div>
                    </div>
                    <div class="countingDiv">
                      <p>35</p>
                      <p>30</p>
                      <p>25</p>
                      <p>20</p>
                      <p>15</p>
                      <p>10</p>
                      <p>5</p>
                      <p>0</p>
                    </div>
                    <div class="secondGRAPH_div">
                      <table width="95%" border="1px solid rgb(229, 221, 221);" class="tableColor" style="border: 1px solid rgb(229, 221, 221);">
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                        <tr>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                          <td>&nbsp;</td>
                        </tr>
                      </table>
                      <div class="image-graph-div">
                        <img src="graph-lines.png" alt="">
                      </div>
                      <div class="lastCOuntingDiv">
                        <p class="firstCount-q">1</p>
                        <p>2</p>
                        <p>3</p>
                        <p>4</p>
                        <p>5</p>
                        <p class="lastElement">6</p>
                      </div>
                      
                    </div>
                  </div>
          
                  <div class="iconsand-info-div">
                    <div class="first-icon-div">
                      <div class="FirsticonsCricle">
                        <i class="fa-solid fa-bolt"></i>
                      </div>
                      <div class="firstTextInfoDiv">
                        <p class="walt">Anxiety</p>
                        <p class="boldearn">4,567.53</p>
                      </div>
                    </div>
                    <div class="second-icon-div">
                      <div class="SecondiconsCricle">
                        <i class="fa-solid fa-bed"></i>
                      </div>
                      <div class="secondTextInfoDiv">
                        <p class="refrel">Depression</p>
                        <p class="boldearn">1689.53</p>
                      </div>
                    </div>
                    <div class="Third-cion_div" style="margin-right:30px;">
                      <div class="ThirdIconsCricle">
                        <i class="fa-solid fa-tachometer"></i>    </div>
                        <div class="thirdTextInfoDiv">
                          <p class="eastimate">Stress</p>
                          <p class="boldearn">2851.53</p>
                        </div>
                  
                    </div>
                    
					
                  </div>

                </div>



                <div class="secondBox-div">
                    <p>Emotional Trends</p>
                 <div class="circle-div">
                    <img src="circle.png" alt="">
                 </div>
                    <div class="three-number">
                        <div class="firstnum">
                            <h2>34%</h2>
                            <div class="fc">
                                <div class="ffc"></div>
                                <span>Depression</span>
                            </div>
                        </div>
                        <div class="secondnum">
                            <h2>55%</h2>
                           <div class="div">
                            <div class="c"></div>
                            <span>Anxiety</span>
                           </div>
                        </div>
                        <div class="thirdnum">
                            <h2>11%</h2>
                            <div class="thc">
                                <div class="tc"></div>
                                <span>Stress</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                      
       <div class="main-cards_DIV">
        <div class="multpleCards_div">
           <div class="cardTwo" style="background:#c0dbef;">
            <p>Standard Guidelines for reducing</p>
            <div class="second-cardInfoBox_DV">
              <h2 style="color:#34a4fe; font-size:20px;">Anxiety</h2>
            
            </div>
          </div>
         <div class="cardTwo">
            <p>Standard Guidelines for reducing</p>
            <div class="second-cardInfoBox_DV">
              <h2 style="font-size:20px;">Depression</h2>
            
            </div>
          </div>
          <div class="cardThree">
            <p>Standard Guidelines for reducing</p>
            <div class="third-cardInfoBox_DV">
              <h2 style="font-size:20px;">Stress</h2>
             </div>
            </div>
           <div class="cardTwo" style="background:#d7b0f4;">
            <p>Control</p>
            <div class="second-cardInfoBox_DV">
              <h2 style="color:#9521fe;font-size:20px;">Health Precautionary Measures</h2>
            
            </div>
          </div>
         
		 
        </div>
       </div>
          </div>
    </div>
	
	
	<style>
		.editProfile{
			position:absolute;
			top:50%;
			left:50%;
			transform:translate(-50%,-50%);
			width:400px;
			padding:20px;
			background:#fff;
			box-shadow:0 10px 20px rgba(0,0,0,0.4);
			display:none;
		}
		.editProfile input{
			padding:7px;
			border:2px solid crimson;
			outline:none;
			margin-bottom:15px;
			width:80%;
		}
		.editProfile .btn{
			background:crimson;
			color:#fff;
		}
		.editProfile h1{
			margin-bottom:20px;
		}
	</style>
	
	
	<style>
 .loading-div {
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
          font-weight:600;
			color:#fff;
			z-index:9999;
			font-size:20px;
			background:crimson;
			padding:10px 20px;
			box-shadow:0 5px 10px rgba(0,0,0,0.2);
			display:none;
			
}

</style>

<div class="loading-div" id="loading-div">
        Updating...
    </div>

	<div class="editProfile" id="divOne">
	<center>	 <h1>Update your Profile!</h1>
            </center>     
				 <form id="updateForm" style="display:flex;flex-direction:column; justify-content:center; align-items:center; width:100%;"> 
				
				<input type="text" name="name" placeholder="Write updated name" id="name" required>
                
				<input type="email" name="email" placeholder="Write updated email" id="email" required>
                <input type="password" name="password" placeholder="Write updated password" id="password" required>
				
                <input type="submit" class="btn btn2" style="width:30%;" value="Update"> </form>
				
	</div>
	
	<script>
  document.addEventListener('DOMContentLoaded', function() {
   function getUserIdFromUrlss() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        return urlSearchParams.get('objectId');
    }

	

    const userIds = getUserIdFromUrlss();
const loadingDiv = document.getElementById('loading-div');

    const updateForm = document.getElementById('updateForm');

    updateForm.addEventListener('submit', async function(event) {
      event.preventDefault(); // Prevent the default form submission behavior

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      // Create an object with the data we want to send
      const userData = {
        name: name,
        email: email,
        password: password
      };

      try {
	   loadingDiv.style.display = 'block';
   
        // Send the PUT request using fetch with async/await
        const response = await fetch(`https://brick-red-ostrich-gear.cyclic.app/api/updateUser/${userIds}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(userData) // Convert the JavaScript object to a JSON string
        });
loadingDiv.style.display = 'none';
   
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json(); // Parse JSON response into native JavaScript object
        alert('Profile updated successfully!');
        console.log(data); // Log data to the console for debugging
		location.reload();
      } catch (error) {
        console.error('Error:', error);
        alert('Error updating profile!');
      }
    });
  });
  
const dashboardDivOne = document.getElementById("divOne");
const dashboardDivTwo = document.getElementById("divTwo");
const dashboardDivThree = document.getElementById("divThree");




function editButton(){
	
	 dashboardDivOne.style.display = "block";
	  
}

function communityButton(){
	
	 dashboardDivOne.style.display = "none";
	 dashboardDivThree.style.display = "none";
	 dashboardDivTwo.style.display = "flex";
	  
}

function homeButton(){
	
	 dashboardDivOne.style.display = "none";
	 dashboardDivThree.style.display = "block";
	 dashboardDivTwo.style.display = "none";
	  
}

function editButton(){
	
	 dashboardDivOne.style.display = "block";
	  
}

</script>

<!--
          <div class="mainlasttwoDivs">
            <div class="lastTwoD">
              <div class="firstLastD">
                <p class="recent-activ">Recent Activities</p>
                <div class="first-task">
                  <p class="minutesAgo">42 Minutes ago</p>
                  <div class="firsttask-innerDiv">
                    <div class="style-boxOne">
                      <i class="fa-solid fa-gift"></i>
                    </div>
                  <div class="classDiv" style="margin-left: 1rem; margin-top: .6rem;">
                    <p>Task Updated</p>
                    <p  style="font-size: 10px;"><span>Nikolai</span>  Updated a Task</p>
                  </div>
                  </div>
                </div>
                <div class="second-task">
                  <p  class="minutesAgo">1 Day ago</p>
                  <div class="secondtask-innerDiv">
                    <div class="style-boxTwo">
                      <i class="fa-solid fa-wallet"></i>
                    </div>
                 <div class="classDiv" style="margin-left: 1rem; margin-top: .6rem;">
                  <p>Deal Added</p>
                  <p  style="font-size: 10px;"><span>Panshi</span>  Updated a Task</p>
                 </div>
                  </div>
                </div>
                <div class="third-task">
                  <p  class="minutesAgo">42 Minutes ago</p>
                  <div class="thirdtask-innerDiv">
                    <div class="style-boxThree">
                      <i class="fa-solid fa-comment-medical"></i>
                    </div>
                <div class="classDiv" style="margin-left: 1rem; margin-top: .6rem;">
                  <p>Published Article</p>
                  <p  style="font-size: 10px;"><span>Rashel</span>  Public Article</p>
                </div>
                  </div>
                </div>
                <div class="fourth-task">
                  <p  class="minutesAgo">1 Day ago</p>
                  <div class="fourthtask-innerDiv">
                    <div class="style-boxFour">
                      <i class="fa-sharp fa-solid fa-fire"></i>
                    </div>
                  <div class="classDiv" style="margin-left: 1rem; margin-top: .6rem;">
                    <p>Dock Updated</p>
                    <p  style="font-size: 10px;"><span>reshmi</span>  Updated a Doc</p>
                  </div>
                  </div>
                </div>
                <div class="fifth-task">
                  <p  class="minutesAgo">1 Day ago</p>
                  <div class="fifthtask-innerDiv">
                    <div class="style-boxFive">
                      <i class="fa-sharp fa-solid fa-globe"></i>
                    </div>
                    <div class="classDiv" style="margin-left: 1rem; margin-top: .6rem;">
                      <p>Replied Comment</p>
                    <p style="font-size: 10px;"><span>jenathon</span>  Added a Comment</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="secondLastD">
                <div class="headingtwo">
                  <p>Overview Status</p>
                  <span>Overview Of Latest Month</span>
                  <div class="twoMainInnerDivs">
                    <div class="firstinnerChildDiv">
                     <div class="ffffff">
                      <button><i class="fa-sharp fa-solid fa-plus"></i> Add</button>
                      <i class="fa-solid fa-cart-plus" id="mainFirst"></i>
                      <i class="fa-solid fa-trash" id="mainSecond"></i>
                      <i class="fa-sharp fa-solid fa-dumpster-fire" id="mainThird"></i>
                     </div>
                     <div class="sssss">
                      <input type="text" placeholder="Search">
                      <i class="fa-solid fa-circle-minus" id="mainFourth"></i>
                     </div>
                    </div>
                    <div class="secondinnerChildDiv">
                  <div style="width: 95%; margin-left: 1rem;">
                    <div class="inner-innerDiv">
                      <p>INNVOICE</p>
                      <p>CUSTOMERS</p>
                      <p>FROM</p>
                      <p>PRICE</p>
                      <p>STATUS</p>
                    </div>
                    <div class="inner-innerDiv" style="background: none;">
                      <p>12386</p>
                      <p>Charly Dues</p>
                      <p>Brazil</p>
                      <p>$299</p>
                     <button class="lasttwoBtnf">Process</button>
                    </div>
                    <div class="inner-innerDiv" style="background: none;">
                      <p>12386</p>
                      <p>Marko</p>
                      <p>Italy</p>
                      <p>$2642</p>
                      <button class="lastBTnOn">Open</button>
                    </div>
                  </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
-->

  </body>
</html>
